(function(h){var d,e;var g=function(q,k){if(typeof document.addEventListener!=="function"&&!b.isIE8()){return}var B=false;try{B=q instanceof Element}catch(n){B=!!q&&B.nodeType===1}if(!(B||typeof(q)==="string")){k=q}var u=this,C=u.classes,t=u.settings=b.merge(u.defaults,{attachTo:q},k||{}),w=u.container=b.make("div",{"class":C.container}),m=u.calendars=[],r=e().day(t.weekStart),o,z=[],A,v,p,E,s,D,H=[],G,y=0,x=t.months;if(b.isIE8()){b.addClassName(w,"ie8")}y=7;while(y--){z.push(r.format(t.columnHeaderFormat));r.add("days",1)}f(u);if(typeof t.subscribe==="object"){for(y in t.subscribe){if(t.subscribe.hasOwnProperty(y)){u.subscribe(y,t.subscribe[y])}}}u._sel=[];if(!!t.selected){u.setSelected(t.selected,false)}if(!!t.viewStartDate){o=e(t.viewStartDate,t.format)}else{if(u._sel.length>0){o=e(u._sel[0])}else{o=e()}}u.viewStartDate=o.date(1);var F=({"past":t.months-1,"today-past":t.months-1,"any":t.months>2?Math.floor(t.months/2):0,"today-future":0,"future":0})[this.settings.direction];if(F&&e().month()==e(u.viewStartDate).month()){u.viewStartDate=e(u.viewStartDate).subtract({M:F}).date(1)}if(typeof t.blackout==="function"){u.blackout=t.blackout}else{if(!!t.blackout){var l=c(t.blackout,t.parseSplitDelimiter,t.format);u.blackout=function(j){j=e(j).startOf("day").yearDay();if(j<1||!u._sel){return false}var I=l.length;while(I--){if(l[I].startOf("day").yearDay()===j){return true}}return false}}else{u.blackout=function(){return false}}}u.direction=u.directions[t.direction]?u.directions[t.direction]:u.directions["any"];x=Math.max(t.months,1);while(x--){A=b.make("div",{"class":C.calendar},w);A.setAttribute("data-cal-index",x);if(t.months>1){if(x==Math.max(t.months-1,1)){b.addClassName(A,C.monthFirst)}else{if(x===0){b.addClassName(A,C.monthLast)}else{b.addClassName(A,C.monthMiddle)}}}v=b.make("div",{"class":C.title},A);if(!t.useYearNav){b.addClassName(v,C.disableYearNav)}b.make("a",{"class":C.previousYear},v);b.make("a",{"class":C.previousMonth},v);b.make("a",{"class":C.nextYear},v);b.make("a",{"class":C.nextMonth},v);p=b.make("span",{"class":C.caption},v);E=b.make("div",{"class":C.header},A);y=0;do{G=b.make("span",{},E);G.innerHTML=z[y]}while(++y<7);s=b.make("div",{"class":C.days},A);y=0;H=[];do{if(t.mode=="week"){if((y%7)===0){D=b.make("div",{"class":C.week+" clearfix"},s);H.push(D)}b.make("span",{},D)}else{H.push(b.make("span",{},s))}}while(++y<42);m.push({caption:p,days:H});if(x){b.make("div",{"class":C.monthSeparator},w)}}u.draw();b.addEvent(w,"mousedown",function(j,I){var i;if(b.hasClassName(I,C.nextMonth)){if(!u.disableNext&&u.publish("view-changed",u,["next-month"])!==false){u.viewStartDate.add("months",1);u.draw()}return false}else{if(b.hasClassName(I,C.previousMonth)){if(!u.disablePreviousMonth&&u.publish("view-changed",u,["previous-month"])!==false){u.viewStartDate.subtract("months",1);u.draw()}return false}else{if(b.hasClassName(I,C.nextYear)){if(!u.disableNext&&u.publish("view-changed",u,["next-year"])!==false){u.viewStartDate.add("years",1);u.draw()}return false}else{if(b.hasClassName(I,C.previousYear)){if(!u.disablePreviousMonth&&u.publish("view-changed",u,["previous-year"])!==false){u.viewStartDate.subtract("years",1);u.draw()}return false}else{if((b.hasClassName(I.parentNode,C.days)||b.hasClassName(I.parentNode,C.week))&&b.hasClassName(I,C.dayActive)&&(i=I.getAttribute("data-date"))){i=e(i,t.dayAttributeFormat).hours(12);if(u.publish("date-clicked",u,[i])!==false){switch(t.mode){case"multiple":if(!u.addSelected(i)){u.removeSelected(i)}break;case"range":u.addSelected(i);break;case"week":u.weekSelected(i);break;case"single":default:u.addSelected(i);break}}return false}else{if(b.hasClassName(I.parentNode,C.week)&&(i=I.getAttribute("data-date"))){i=e(i,t.dayAttributeFormat).hours(12);if(u.publish("date-clicked",u,[i])!==false){if(t.mode=="week"){u.weekSelected(i)}}return false}}}}}}return false});if(!!(t.attachTo=b.$(t.attachTo))){t.attachTo.appendChild(w)}};g.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:true,viewStartDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:false,format:null,subscribe:null,columnHeaderFormat:"dd",titleFormat:"MMMM, YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" | ",multipleDelimiter:", ",useYearNav:true,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:false,disableNextMonth:false,disablePreviousYear:false,disableNextYear:false,directions:{"past":function(i){return e(i).startOf("day").yearDay()>=d.yearDay()
},"today-past":function(i){return e(i).startOf("day").yearDay()>d.yearDay()},"any":function(i){return false},"today-future":function(i){return e(i).startOf("day").yearDay()<d.yearDay()},"future":function(i){return e(i).startOf("day").yearDay()<=d.yearDay()}},getSelectedAsDates:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(this._sel[k].toDate())}return j},getSelectedAsText:function(l){var j=[];var k=0,m=this._sel.length;for(;k<m;k++){j.push(this._sel[k].format(l||this.settings.format||"YYYY-MM-DD"))}return j},getSelectedRaw:function(){var j=[];var k=0,l=this._sel.length;for(;k<l;k++){j.push(e(this._sel[k]))}return j},getSelected:function(j){var i=this.getSelectedAsText(j);switch(this.settings.mode){case"week":case"range":i.splice(2);return i.join(this.settings.rangeDelimiter);case"multiple":return i.join(this.settings.multipleDelimiter);case"single":default:return(i[0]||null)}},isSelected:function(l){l=e(l).startOf("day").yearDay();if(l<1||!this._sel||this._sel.length<1){return false}switch(this.settings.mode){case"week":case"range":var k=this._sel[0]?this._sel[0].startOf("day").yearDay():0,j=this._sel[1]?this._sel[1].startOf("day").yearDay():0;if(k===l||j===l){return 1}if(!k||!j){return 0}if((l>k&&l<j)||(k<j&&l<k&&l>j)){return -1}return false;case"multiple":var m=this._sel.length;while(m--){if(this._sel[m].startOf("day").yearDay()===l){return true}}return false;case"single":default:return(this._sel[0]&&(this._sel[0].startOf("day").yearDay()===l))}return false},setSelected:function(k,j){var m,n=c(k,this.settings.parseSplitDelimiter,this.settings.format),l=c(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);m=l.length;while(m--){this.removeSelected(l[m],false)}m=n.length;while(m--){this.addSelected(n[m],false)}if(j!==false){if(n[0]){this.viewStartDate=e(n[0],this.settings.format)}this.draw()}},addSelected:function(j,i){j=e(j,this.settings.format).hours(12);if(this.settings.dayOutOfMonthClickable&&this.settings.mode!=="range"){this.makeSelectedDateVisible(j)}switch(this.settings.mode){case"multiple":if(!this.isSelected(j)){this._sel.push(j)}else{return false}break;case"range":if(this._sel.length!==1){this._sel=[j]}else{if(j.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()){this._sel[1]=j}else{this._sel=[j,this._sel[0]]}}break;case"single":default:this._sel=[j];break}this._sel.sort(function(l,k){return l.startOf("day").yearDay()-k.startOf("day").yearDay()});this.publish("change",this,[j]);if(i!==false){this.draw()}return true},weekSelected:function(k){var i=k.toDate();var l=e(i).startOf("week");var j=e(i).endOf("week").subtract("day",1);this._sel=[l,j];this.publish("change",this,[k.day()]);this.draw()},makeSelectedDateVisible:function(i){outOfViewMonth=e(i).date("1").diff(this.viewStartDate,"months");if(outOfViewMonth<0){this.viewStartDate.subtract("months",1)}else{if(outOfViewMonth>0&&outOfViewMonth>=this.settings.months){this.viewStartDate.add("months",1)}}},removeSelected:function(k,j){k=e(k,this.settings.format).hours(12);var l=this._sel.length;while(l--){if(this._sel[l].startOf("day").yearDay()===k.startOf("day").yearDay()){this._sel.splice(l,1);this.publish("change",this,[k]);if(j!==false){this.draw()}return true}}return false},draw:function a(){var r=e(this.viewStartDate).startOf("day").hours(12),x,n=this.classes,m,v,t,q=0,u,p=0,o,A,C,y,l=this.settings,z;u=this.calendars.length;do{x=e(r).date(1);x.day(x.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart);m=this.calendars[q];m.caption.innerHTML=r.format(this.settings.titleFormat);p=0;A=0;do{if(l.mode=="week"){if(((p%7)===0)&&(p!==0)){A++}v=m.days[A].childNodes[p%7]}else{v=m.days[p]}t=[];C=this.isSelected(x);if(C){t.push(({"-1":n.dayInRange,"1":n.daySelected,"true":n.daySelected})[C])}if(x.month()!=r.month()){t.push(n.dayOutOfMonth)}else{t.push(n.dayInMonth)}if(!(this.blackout(x)||this.direction(x)||(x.month()!=r.month()&&l.dayOutOfMonthClickable===false))||C>0){t.push(n.dayActive)}if(x.startOf("day").yearDay()===d.yearDay()){t.push(n.dayToday)}y=x.format(this.settings.dayAttributeFormat);if(l.dateClassMap[y]){t.push(l.dateClassMap[y])}v.innerHTML=x.format(l.dayNumberFormat);v.className=t.join(" ");v.setAttribute("data-date",y);x.add("days",1)}while(++p<42);r.add("months",1)}while(++q<u);if(l.directionScrolling){var B=e().startOf("day").hours(12);z=r.diff(B,"months",true);if(l.direction==="today-past"||l.direction==="past"){if(z<=0){this.disableNextMonth=false;b.removeClassName(this.container,n.disableNextMonth)}else{this.disableNextMonth=true;b.addClassName(this.container,n.disableNextMonth)}}else{if(l.direction==="today-future"||l.direction==="future"){if(z>l.months){this.disablePreviousMonth=false;b.removeClassName(this.container,n.disablePreviousMonth)}else{this.disablePreviousMonth=true;b.addClassName(this.container,n.disablePreviousMonth)}}}if(l.direction==="today-past"||l.direction==="past"){if(z<=-11){this.disableNextYear=false;b.removeClassName(this.container,n.disableNextYear)
}else{this.disableNextYear=true;b.addClassName(this.container,n.disableNextYear)}}else{if(l.direction==="today-future"||l.direction==="future"){if(z>(11+l.months)){this.disablePreviousYear=false;b.removeClassName(this.container,n.disablePreviousYear)}else{this.disablePreviousYear=true;b.addClassName(this.container,n.disablePreviousYear)}}}}}};var c=function(n,l,p){var k=[];if(typeof n==="string"){n=n.split(l)}else{if(!b.isArray(n)){n=[n]}}var q=n.length,o=0,j;do{if(n[o]){j=e(n[o],p).hours(12);if(j.isValid()){k.push(j)}}}while(++o<q);return k};window.Kalendae=g;var b=g.util={isIE8:function(){return !!((/msie 8./i).test(navigator.appVersion)&&!(/opera/i).test(navigator.userAgent)&&window.ActiveXObject&&XDomainRequest&&!window.msPerformance)},$:function(i){return(typeof i=="string")?document.getElementById(i):i},$$:function(i){return document.querySelectorAll(i)},make:function(m,l,j){var i,n=document.createElement(m);if(!!l){for(i in l){if(l.hasOwnProperty(i)){n.setAttribute(i,l[i])}}}if(!!j){j.appendChild(n)}return n},isVisible:function(i){return i.offsetWidth>0||i.offsetHeight>0},getStyle:function(k,i){var l,j;if(k.currentStyle){l=k.currentStyle[i]}else{if(window.getComputedStyle){j=window.getComputedStyle(k,null);l=j?j[i]:""}}return l},domReady:function(j){var i=document.readyState;if(i==="complete"||i==="interactive"){j()}else{setTimeout(function(){b.domReady(j)},9)}},addEvent:function(j,i,l){var k=function(m){m=m||window.event;var n=m.target||m.srcElement;var o=l.apply(j,[m,n]);if(o===false){if(!!m.preventDefault){m.preventDefault()}else{m.returnValue=false;m.cancelBubble=true}}return o};if(j.attachEvent){j.attachEvent("on"+i,k)}else{j.addEventListener(i,k,false)}return k},removeEvent:function(j,i,k){if(j.detachEvent){j.detachEvent("on"+i,k)}else{j.removeEventListener(i,k,false)}},fireEvent:function(j,i){if(document.createEvent){var k=document.createEvent("HTMLEvents");k.initEvent(i,false,true);j.dispatchEvent(k)}else{if(document.createEventObject){j.fireEvent("on"+i)}else{if(typeof j["on"+i]=="function"){j["on"+i]()}}}},hasClassName:function(k,j){if(!(k=b.$(k))){return false}var i=k.className;return(i.length>0&&(i==j||new RegExp("(^|\\s)"+j+"(\\s|$)").test(i)))},addClassName:function(j,i){if(!(j=b.$(j))){return}if(!b.hasClassName(j,i)){j.className+=(j.className?" ":"")+i}},removeClassName:function(j,i){if(!(j=b.$(j))){return}j.className=b.trimString(j.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," "))},isFixed:function(i){do{if(b.getStyle(i,"position")==="fixed"){return true}}while((i=i.offsetParent));return false},scrollContainer:function(i){do{var j=b.getStyle(i,"overflow");if(j==="auto"||j==="scroll"){return i}}while((i=i.parentNode)&&i!=window.document.body);return null},getPosition:function(l,j){var i=l.offsetLeft,m=l.offsetTop,k={};if(!j){while((l=l.offsetParent)){i+=l.offsetLeft;m+=l.offsetTop}}k[0]=k.left=i;k[1]=k.top=m;return k},getHeight:function(i){return i.offsetHeight||i.scrollHeight},getWidth:function(i){return i.offsetWidth||i.scrollWidth},trimString:function(i){return i.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){var j=(arguments[0]===true),m={},l=j?1:0;var k=function(n,i){if(typeof i!=="object"){return}for(var o in i){if(i.hasOwnProperty(o)){if(j&&typeof n[o]==="object"&&typeof i[o]==="object"){_update(n[o],i[o])}else{n[o]=i[o]}}}return n};for(;l<arguments.length;l++){k(m,arguments[l])}return m},isArray:function(i){return Object.prototype.toString.call(i)=="[object Array]"}};if(typeof document.addEventListener==="function"){g.util.domReady(function(){var l=b.$$(".auto-kal"),k=l.length,m,j,n;while(k--){m=l[k];n=m.getAttribute("data-kal");j=(n==null||n=="")?{}:(new Function("return {"+n+"};"))();if(m.tagName==="INPUT"){new g.Input(m,j)}else{new g(b.merge(j,{attachTo:m}))}}})}g.Input=function(n,t){if(typeof document.addEventListener!=="function"&&!b.isIE8()){return}var o=this.input=b.$(n),p,k,s=false;if(!o||o.tagName!=="INPUT"){throw"First argument for Kalendae.Input must be an <input> element or a valid element id."}var r=this,l=r.classes,i=r.settings=b.merge(r.defaults,t);this._events={};i.attachTo=window.document.body;if(!i.selected){i.selected=o.value}else{p=true}g.call(r,i);if(i.closeButton){k=b.make("a",{"class":l.closeButton},r.container);b.addEvent(k,"click",function(){o.blur()})}if(p){o.value=r.getSelected()}var q=r.container,m=false;q.style.display="none";b.addClassName(q,l.positioned);this._events.containerMouseDown=b.addEvent(q,"mousedown",function(u,v){m=true});this._events.documentMousedown=b.addEvent(window.document,"mousedown",function(u,v){m=false});this._events.inputFocus=b.addEvent(o,"focus",function(){s=true;r.setSelected(this.value);s=false;r.show()});this._events.inputBlur=b.addEvent(o,"blur",function(){if(m&&b.isIE8()){m=false;o.focus()}else{r.hide()}});this._events.inputKeyup=b.addEvent(o,"keyup",function(u){s=true;r.setSelected(this.value);s=false});var j=b.scrollContainer(o);if(j){b.addEvent(j,"scroll",function(u){o.blur()})}r.subscribe("change",function(){if(s){return
}o.value=r.getSelected();b.fireEvent(o,"change")})};g.Input.prototype=b.merge(g.prototype,{defaults:b.merge(g.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:true,offsetLeft:0,offsetTop:0}),classes:b.merge(g.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var m=this.container,j=m.style,o=this.input,n=b.getPosition(o),i=b.scrollContainer(o),l=i?i.scrollTop:0,k=this.settings;j.display="";switch(k.side){case"left":j.left=(n.left-b.getWidth(m)+k.offsetLeft)+"px";j.top=(n.top+k.offsetTop-l)+"px";break;case"right":j.left=(n.left+b.getWidth(o))+"px";j.top=(n.top+k.offsetTop-l)+"px";break;case"top":j.left=(n.left+k.offsetLeft)+"px";j.top=(n.top-b.getHeight(m)+k.offsetTop-l)+"px";break;case"bottom":default:j.left=(n.left+k.offsetLeft)+"px";j.top=(n.top+b.getHeight(o)+k.offsetTop-l)+"px";break}j.position=b.isFixed(o)?"fixed":"absolute";this.publish("show",this)},hide:function(){this.container.style.display="none";this.publish("hide",this)},destroy:function(){var i=this.container;var j=this.input;b.removeEvent(i,"mousedown",this._events.containerMousedown);b.removeEvent(window.document,"mousedown",this._events.documentMousedown);b.removeEvent(j,"focus",this._events.inputFocus);b.removeEvent(j,"blur",this._events.inputBlur);b.removeEvent(j,"keyup",this._events.inputKeyup);i.remove()}});

    var f=function(j){if(!j){j=this}var i=j.c_||{};j.publish=function(m,p,l){var n=i[m],k=n?n.length:0,o;while(k--){o=n[k].apply(p,l||[]);if(typeof o==="boolean"){return o}}};j.subscribe=function(k,m,l){if(!i[k]){i[k]=[]}if(l){i[k].push(m)}else{i[k].unshift(m)}return[k,m]};j.unsubscribe=function(m){var l=i[m[0]],n=m[1],k=l?l.length:0;while(k--){if(l[k]===n){l.splice(k,1)}}}};(function(D){var aj,K="2.1.0",ao=Math.round,aq,aa={},Z=(typeof module!=="undefined"&&module.exports),H=/^\/?Date\((\-?\d+)/i,an=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,p=/\d\d?/,ab=/\d{1,3}/,ad=/\d{3}/,T=/\d{1,4}/,y=/[+\-]?\d{1,6}/,U=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,k=/Z|[\+\-]\d\d:?\d\d/i,E=/T/i,x=/[\+\-]?\d+(\.\d{1,3})?/,V=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,m="YYYY-MM-DDTHH:mm:ssZ",r=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],M=/([\+\-]|\d\d)/gi,v="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ak={"Milliseconds":1,"Seconds":1000,"Minutes":60000,"Hours":3600000,"Days":86400000,"Months":2592000000,"Years":31536000000},C={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},u={},Q="DDD w W M D d".split(" "),G="M D H h m s w W".split(" "),q={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return am(this.year()%100,2)},YYYY:function(){return am(this.year(),4)},YYYYY:function(){return am(this.year(),5)},gg:function(){return am(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return am(this.weekYear(),5)},GG:function(){return am(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return am(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return am(~~(this.milliseconds()/10),2)},SSS:function(){return am(this.milliseconds(),3)},Z:function(){var av=-this.zone(),i="+";if(av<0){av=-av;i="-"}return i+am(~~(av/60),2)+":"+am(~~av%60,2)},ZZ:function(){var av=-this.zone(),i="+";if(av<0){av=-av;i="-"}return i+am(~~(10*av/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function X(av,i){return function(aw){return am(av.call(this,aw),i)}}function R(i,av){return function(aw){return this.lang().ordinal(i.call(this,aw),av)}}while(Q.length){aq=Q.pop();q[aq+"o"]=R(q[aq],aq)
    }while(G.length){aq=G.pop();q[aq+aq]=X(q[aq],2)}q.DDDD=X(q.DDD,3);function at(){}function F(i){B(this,i)}function au(ax){var az=ax.years||ax.year||ax.y||0,av=ax.months||ax.month||ax.M||0,i=ax.weeks||ax.week||ax.w||0,aC=ax.days||ax.day||ax.d||0,aA=ax.hours||ax.hour||ax.h||0,ay=ax.minutes||ax.minute||ax.m||0,aB=ax.seconds||ax.second||ax.s||0,aw=ax.milliseconds||ax.millisecond||ax.ms||0;this._input=ax;this._milliseconds=aw+aB*1000+ay*60000+aA*3600000;this._days=aC+i*7;this._months=av+az*12;this._data={};this._bubble()}function B(aw,av){for(var ax in av){if(av.hasOwnProperty(ax)){aw[ax]=av[ax]}}return aw}function ai(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function am(aw,av){var i=aw+"";while(i.length<av){i="0"+i}return i}function af(ay,ax,aB,aA){var aw=ax._milliseconds,aD=ax._days,av=ax._months,az,aC,i;if(aw){ay._d.setTime(+ay._d+aw*aB)}if(aD||av){az=ay.minute();aC=ay.hour()}if(aD){ay.date(ay.date()+aD*aB)}if(av){ay.month(ay.month()+av*aB)}if(aw&&!aA){aj.updateOffset(ay)}if(aD||av){ay.minute(az);ay.hour(aC)}}function N(i){return Object.prototype.toString.call(i)==="[object Array]"}function ae(az,ay){var av=Math.min(az.length,ay.length),aw=Math.abs(az.length-ay.length),aA=0,ax;for(ax=0;ax<av;ax++){if(~~az[ax]!==~~ay[ax]){aA++}}return aA+aw}function O(i){return i?C[i]||i.toLowerCase().replace(/(.)s$/,"$1"):i}at.prototype={set:function(av){var ax,aw;for(aw in av){ax=av[aw];if(typeof ax==="function"){this[aw]=ax}else{this["_"+aw]=ax}}},_months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(av){var aw,ay,ax;if(!this._monthsParse){this._monthsParse=[]}for(aw=0;aw<12;aw++){if(!this._monthsParse[aw]){ay=aj([2000,aw]);ax="^"+this.months(ay,"")+"|^"+this.monthsShort(ay,"");this._monthsParse[aw]=new RegExp(ax.replace(".",""),"i")}if(this._monthsParse[aw].test(av)){return aw}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"日_一_二_三_四_五_六".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(ay){var av,ax,aw;if(!this._weekdaysParse){this._weekdaysParse=[]}for(av=0;av<7;av++){if(!this._weekdaysParse[av]){ax=aj([2000,1]).day(av);aw="^"+this.weekdays(ax,"")+"|^"+this.weekdaysShort(ax,"")+"|^"+this.weekdaysMin(ax,"");this._weekdaysParse[av]=new RegExp(aw.replace(".",""),"i")}if(this._weekdaysParse[av].test(ay)){return av}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(av){var i=this._longDateFormat[av];if(!i&&this._longDateFormat[av.toUpperCase()]){i=this._longDateFormat[av.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(aw){return aw.slice(1)});this._longDateFormat[av]=i}return i},isPM:function(i){return((i+"").toLowerCase()[0]==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,av,aw){if(i>11){return aw?"pm":"PM"}else{return aw?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(av,aw){var i=this._calendar[av];return typeof i==="function"?i.apply(aw):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(ax,aw,av,ay){var i=this._relativeTime[av];return(typeof i==="function")?i(ax,aw,av,ay):i.replace(/%d/i,ax)},pastFuture:function(aw,i){var av=this._relativeTime[aw>0?"future":"past"];return typeof av==="function"?av(i):av.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return ac(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function J(av,i){i.abbr=av;if(!aa[av]){aa[av]=new at()}aa[av].set(i);return aa[av]}function I(i){if(!i){return aj.fn._lang}if(!aa[i]&&Z){try{require("./lang/"+i)}catch(av){return aj.fn._lang}}return aa[i]}function S(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function ah(ax){var ay=ax.match(t),av,aw;for(av=0,aw=ay.length;av<aw;av++){if(q[ay[av]]){ay[av]=q[ay[av]]}else{ay[av]=S(ay[av])}}return function(az){var i="";for(av=0;av<aw;av++){i+=ay[av] instanceof Function?ay[av].call(az,ax):ay[av]}return i}}function Y(av,ay){var aw=5;function ax(i){return av.lang().longDateFormat(i)||i}while(aw--&&z.test(ay)){ay=ay.replace(z,ax)}if(!u[ay]){u[ay]=ah(ay)}return u[ay](av)}function o(av,i){switch(av){case"DDDD":return ad;case"YYYY":return T;case"YYYYY":return y;case"S":case"SS":case"SSS":case"DDD":return ab;
        case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return U;case"a":case"A":return I(i._l)._meridiemParse;case"X":return x;case"Z":case"ZZ":return k;case"T":return E;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(av.replace("\\",""))}}function A(av){var i=(k.exec(av)||[])[0],ax=(i+"").match(M)||["-",0,0],aw=+(ax[1]*60)+~~ax[2];return ax[0]==="+"?-aw:aw}function n(ay,aw,ax){var av,i=ax._a;switch(ay){case"M":case"MM":i[1]=(aw==null)?0:~~aw-1;break;case"MMM":case"MMMM":av=I(ax._l).monthsParse(aw);if(av!=null){i[1]=av}else{ax._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(aw!=null){i[2]=~~aw}break;case"YY":i[0]=~~aw+(~~aw>68?1900:2000);break;case"YYYY":case"YYYYY":i[0]=~~aw;break;case"a":case"A":ax._isPm=I(ax._l).isPM(aw);break;case"H":case"HH":case"h":case"hh":i[3]=~~aw;break;case"m":case"mm":i[4]=~~aw;break;case"s":case"ss":i[5]=~~aw;break;case"S":case"SS":case"SSS":i[6]=~~(("0."+aw)*1000);break;case"X":ax._d=new Date(parseFloat(aw)*1000);break;case"Z":case"ZZ":ax._useUTC=true;ax._tzm=A(aw);break}if(aw==null){ax._isValid=false}}function s(ax){var ay,aw,av=[];if(ax._d){return}for(ay=0;ay<7;ay++){ax._a[ay]=av[ay]=(ax._a[ay]==null)?(ay===2?1:0):ax._a[ay]}av[3]+=~~((ax._tzm||0)/60);av[4]+=~~((ax._tzm||0)%60);aw=new Date(0);if(ax._useUTC){aw.setUTCFullYear(av[0],av[1],av[2]);aw.setUTCHours(av[3],av[4],av[5],av[6])}else{aw.setFullYear(av[0],av[1],av[2]);aw.setHours(av[3],av[4],av[5],av[6])}ax._d=aw}function W(aw){var az=aw._f.match(t),av=aw._i,ax,ay;aw._a=[];for(ax=0;ax<az.length;ax++){ay=(o(az[ax],aw).exec(av)||[])[0];if(ay){av=av.slice(av.indexOf(ay)+ay.length)}if(q[az[ax]]){n(az[ax],ay,aw)}}if(av){aw._il=av}if(aw._isPm&&aw._a[3]<12){aw._a[3]+=12}if(aw._isPm===false&&aw._a[3]===12){aw._a[3]=0}s(aw)}function L(aw){var aA,av,ay,az=99,ax,aB;for(ax=0;ax<aw._f.length;ax++){aA=B({},aw);aA._f=aw._f[ax];W(aA);av=new F(aA);aB=ae(aA._a,av.toArray());if(av._il){aB+=av._il.length}if(aB<az){az=aB;ay=av}}B(aw,ay)}function al(ax){var ay,aw=ax._i,av=V.exec(aw);if(av){ax._f="YYYY-MM-DD"+(av[2]||" ");for(ay=0;ay<4;ay++){if(r[ay][1].exec(aw)){ax._f+=r[ay][0];break}}if(k.exec(aw)){ax._f+=" Z"}W(ax)}else{ax._d=new Date(aw)}}function ar(aw){var av=aw._i,i=H.exec(av);if(av===D){aw._d=new Date()}else{if(i){aw._d=new Date(+i[1])}else{if(typeof av==="string"){al(aw)}else{if(N(av)){aw._a=av.slice(0);s(aw)}else{aw._d=av instanceof Date?new Date(+av):new Date(av)}}}}}function ag(i,aw,av,ax,ay){return ay.relativeTime(aw||1,!!av,i,ax)}function P(aw,i,av){var aB=ao(Math.abs(aw)/1000),ax=ao(aB/60),aA=ao(ax/60),aC=ao(aA/24),ay=ao(aC/365),az=aB<45&&["s",aB]||ax===1&&["m"]||ax<45&&["mm",ax]||aA===1&&["h"]||aA<22&&["hh",aA]||aC===1&&["d"]||aC<=25&&["dd",aC]||aC<=45&&["M"]||aC<345&&["MM",ao(aC/30)]||ay===1&&["y"]||["yy",ay];az[2]=i;az[3]=aw>0;az[4]=av;return ag.apply({},az)}function ac(ay,aw,az){var av=az-aw,i=az-ay.day(),ax;if(i>av){i-=7}if(i<av-7){i+=7}ax=aj(ay).add("d",i);return{week:Math.ceil(ax.dayOfYear()/7),year:ax.year()}}function ap(av){var i=av._i,aw=av._f;if(i===null||i===""){return null}if(typeof i==="string"){av._i=i=I().preparse(i)}if(aj.isMoment(i)){av=B({},i);av._d=new Date(+i._d)}else{if(aw){if(N(aw)){L(av)}else{W(av)}}else{ar(av)}}return new F(av)}aj=function(i,av,aw){return ap({_i:i,_f:av,_l:aw,_isUTC:false})};aj.utc=function(i,av,aw){return ap({_useUTC:true,_isUTC:true,_l:aw,_i:i,_f:av})};aj.unix=function(i){return aj(i*1000)};aj.duration=function(aw,aA){var az=aj.isDuration(aw),ay=(typeof aw==="number"),aB=(az?aw._input:(ay?{}:aw)),i=an.exec(aw),av,ax;if(ay){if(aA){aB[aA]=aw}else{aB.milliseconds=aw}}else{if(i){av=(i[1]==="-")?-1:1;aB={y:0,d:~~i[2]*av,h:~~i[3]*av,m:~~i[4]*av,s:~~i[5]*av,ms:~~i[6]*av}}}ax=new au(aB);if(az&&aw.hasOwnProperty("_lang")){ax._lang=aw._lang}return ax};aj.version=K;aj.defaultFormat=m;aj.updateOffset=function(){};aj.lang=function(av,i){if(!av){return aj.fn._lang._abbr}if(i){J(av,i)}else{if(!aa[av]){I(av)}}aj.duration.fn._lang=aj.fn._lang=I(av)};aj.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return I(i)};aj.isMoment=function(i){return i instanceof F};aj.isDuration=function(i){return i instanceof au};aj.fn=F.prototype={clone:function(){return aj(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return Y(aj(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!ae(this._a,(this._isUTC?aj.utc(this._a):aj(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;
        return this},format:function(av){var i=Y(this,av||aj.defaultFormat);return this.lang().postformat(i)},add:function(i,aw){var av;if(typeof i==="string"){av=aj.duration(+aw,i)}else{av=aj.duration(i,aw)}af(this,av,1);return this},subtract:function(i,aw){var av;if(typeof i==="string"){av=aj.duration(+aw,i)}else{av=aj.duration(i,aw)}af(this,av,-1);return this},diff:function(ay,ax,i){var az=this._isUTC?aj(ay).zone(this._offset||0):aj(ay).local(),av=(this.zone()-az.zone())*60000,aA,aw;ax=O(ax);if(ax==="year"||ax==="month"){aA=(this.daysInMonth()+az.daysInMonth())*43200000;aw=((this.year()-az.year())*12)+(this.month()-az.month());aw+=((this-aj(this).startOf("month"))-(az-aj(az).startOf("month")))/aA;aw-=((this.zone()-aj(this).startOf("month").zone())-(az.zone()-aj(az).startOf("month").zone()))*60000/aA;if(ax==="year"){aw=aw/12}}else{aA=(this-az);aw=ax==="second"?aA/1000:ax==="minute"?aA/60000:ax==="hour"?aA/3600000:ax==="day"?(aA-av)/86400000:ax==="week"?(aA-av)/604800000:aA}return i?aw:ai(aw)},from:function(av,i){return aj.duration(this.diff(av)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(i){return this.from(aj(),i)},calendar:function(){var av=this.diff(aj().startOf("day"),"days",true),i=av<-6?"sameElse":av<-1?"lastWeek":av<0?"lastDay":av<1?"sameDay":av<2?"nextDay":av<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(av){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(av!=null){if(typeof av==="string"){av=this.lang().weekdaysParse(av);if(typeof av!=="number"){return this}}return this.add({d:av-i})}else{return i}},month:function(av){var aw=this._isUTC?"UTC":"",ax,i;if(av!=null){if(typeof av==="string"){av=this.lang().monthsParse(av);if(typeof av!=="number"){return this}}ax=this.date();this.date(1);this._d["set"+aw+"Month"](av);this.date(Math.min(ax,this.daysInMonth()));aj.updateOffset(this);return this}else{return this._d["get"+aw+"Month"]()}},startOf:function(i){i=O(i);switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}return this},endOf:function(i){return this.startOf(i).add(i,1).subtract("ms",1)},isAfter:function(av,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)>+aj(av).startOf(i)},isBefore:function(av,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)<+aj(av).startOf(i)},isSame:function(av,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)===+aj(av).startOf(i)},min:function(i){i=aj.apply(null,arguments);return i<this?this:i},max:function(i){i=aj.apply(null,arguments);return i>this?this:i},zone:function(i){var av=this._offset||0;if(i!=null){if(typeof i==="string"){i=A(i)}if(Math.abs(i)<16){i=i*60}this._offset=i;this._isUTC=true;if(av!==i){af(this,aj.duration(av-i,"m"),1,true)}}else{return this._isUTC?av:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return aj.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(i){var av=ao((aj(this).startOf("day")-aj(this).startOf("year"))/86400000)+1;return i==null?av:this.add("d",(i-av))},weekYear:function(i){var av=ac(this,this.lang()._week.dow,this.lang()._week.doy).year;return i==null?av:this.add("y",(i-av))},isoWeekYear:function(i){var av=ac(this,1,4).year;return i==null?av:this.add("y",(i-av))},week:function(i){var av=this.lang().week(this);return i==null?av:this.add("d",(i-av)*7)},isoWeek:function(i){var av=ac(this,1,4).week;return i==null?av:this.add("d",(i-av)*7)},weekday:function(i){var av=(this._d.getDay()+7-this.lang()._week.dow)%7;return i==null?av:this.add("d",i-av)},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},lang:function(i){if(i===D){return this._lang}else{this._lang=I(i);return this}}};function w(i,av){aj.fn[i]=aj.fn[i+"s"]=function(aw){var ax=this._isUTC?"UTC":"";if(aw!=null){this._d["set"+ax+av](aw);aj.updateOffset(this);return this}else{return this._d["get"+ax+av]()}}}for(aq=0;aq<v.length;aq++){w(v[aq].toLowerCase().replace(/s$/,""),v[aq])}w("year","FullYear");aj.fn.days=aj.fn.day;aj.fn.months=aj.fn.month;aj.fn.weeks=aj.fn.week;aj.fn.isoWeeks=aj.fn.isoWeek;aj.fn.toJSON=aj.fn.toISOString;aj.duration.fn=au.prototype={_bubble:function(){var aw=this._milliseconds,aB=this._days,i=this._months,az=this._data,aA,ay,av,ax;az.milliseconds=aw%1000;aA=ai(aw/1000);az.seconds=aA%60;ay=ai(aA/60);az.minutes=ay%60;av=ai(ay/60);az.hours=av%24;aB+=ai(av/24);az.days=aB%30;i+=ai(aB/30);az.months=i%12;ax=ai(i/12);az.years=ax},weeks:function(){return ai(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+~~(this._months/12)*31536000000
    },humanize:function(av){var aw=+this,i=P(aw,!av,this.lang());if(av){i=this.lang().pastFuture(aw,i)}return this.lang().postformat(i)},add:function(i,aw){var av=aj.duration(i,aw);this._milliseconds+=av._milliseconds;this._days+=av._days;this._months+=av._months;this._bubble();return this},subtract:function(i,aw){var av=aj.duration(i,aw);this._milliseconds-=av._milliseconds;this._days-=av._days;this._months-=av._months;this._bubble();return this},get:function(i){i=O(i);return this[i.toLowerCase()+"s"]()},as:function(i){i=O(i);return this["as"+i.charAt(0).toUpperCase()+i.slice(1)+"s"]()},lang:aj.fn.lang};function j(i){aj.duration.fn[i]=function(){return this._data[i]}}function l(i,av){aj.duration.fn["as"+i]=function(){return +this/av}}for(aq in ak){if(ak.hasOwnProperty(aq)){l(aq,ak[aq]);j(aq.toLowerCase())}}l("Weeks",604800000);aj.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};aj.lang("en",{ordinal:function(aw){var i=aw%10,av=(~~(aw%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return aw+av}});if(Z){module.exports=aj}if(typeof ender==="undefined"){this["moment"]=aj}if(typeof define==="function"&&define.amd){define("moment",[],function(){return aj})}this["moment"]=aj}).call(typeof g==="undefined"?window:g);if(!g.moment){if(window.moment){g.moment=window.moment}else{throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page."}}e=g.moment;e.fn.yearDay=function(j){var i=Math.floor(this._d/86400000);return(typeof j==="undefined")?i:this.add({d:j-i})};d=g.moment().startOf("day");if(typeof jQuery!=="undefined"&&(typeof document.addEventListener==="function"||b.isIE8())){jQuery.fn.kalendae=function(i){this.each(function(j,k){if(k.tagName==="INPUT"){$(k).data("kalendae",new g.Input(k,i))}else{$(k).data("kalendae",new g($.extend({},{attachTo:k},i)))}});return this}}})();